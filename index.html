<!-- index.html -->

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My VdoCipher Video</title>
</head>
<body>
    <section>
        <h2>Watch Our Video</h2>
        <div id="vdoCipherVideo"></div>
    </section>

    <!-- VdoCipher Video Embedding Script -->
    <script>
        const videoId = '1fdf6a21d9594c5ebc2e4aef345af8de'; // Replace with your VdoCipher video ID

        // Step 1: Make API request to obtain OTP
        fetch(`/api/getVdocipherOTP?videoId=${videoId}`)
        .then(response => response.json())
        .then(data => {
            // Step 2: Use the OTP and playbackInfo in embed code
            const otp = data.otp;
            const playbackInfo = data.playbackInfo;

            // Embed the video player
            const vdoCipherPlayer = document.getElementById('vdoCipherVideo');
            vdoCipherPlayer.innerHTML = `
                <iframe
                    src="https://player.vdocipher.com/v2/?otp=${otp}&playbackInfo=${playbackInfo}"
                    style="border:0;width:100%;height:400px;"
                    allow="encrypted-media"
                    allowfullscreen
                ></iframe>
            `;
        })
        .catch(error => {
            console.error('Error:', error);
            // Handle error as needed
        });
    </script>
</body>
</html>
